### **“Persona”项目开发日志：Day 1**

**日期:** **2025年11月18日**
本日目标: **完成项目初始化、环境搭建，并构建出第一个可运行的功能雏形。**
完成状态: **已完成。** **成功搭建了项目基础架构，实现了核心功能雏形，并建立了版本控制工作流。**

---

### 本日完成事项 (Completed Tasks):

* **项目初始化与环境配置**

  * **项目创建:** **初始化了一个基于 Kotlin 与 Jetpack Compose 的全新 Android Studio 项目。**
  * **依赖集成:** **成功配置了 Gradle 构建系统 (**build.gradle.kts**,** **libs.versions.toml**, **settings.gradle.kts**)，集成了项目所需的核心依赖库，包括：

    * **UI:** **Jetpack Compose**
    * **架构:** **Hilt (依赖注入), ViewModel, Coroutines**
    * **网络:** **Retrofit, OkHttp**
    * **数据解析:** **Kotlinx Serialization**
    * **图片加载:** **Coil**
  * **构建问题修复:** **解决了在初始化过程中遇到的一系列 Gradle 配置问题，包括插件版本不匹配、插件解析失败、依赖缺失、Kotlin 与 Compose 编译器版本兼容性等，确保了项目的可构建性。**
* **应用框架与架构设计**

  * **应用入口配置:** **修复了因** **AndroidManifest.xml** **配置错误（Hilt Application 未注册、启动 Activity 指向错误）导致的应用启动时崩溃问题。**
  * **权限声明:** **在** **AndroidManifest.xml** **中添加了** **android.permission.INTERNET** **权限，解决了因网络权限缺失导致的应用运行时崩溃问题。**
  * **包结构规划:** **依据 MVVM 设计模式，建立了清晰的分层包结构 (**data**,** **di**, **ui**, **util**)，为后续开发提供了清晰的代码组织规范。
* **核心功能开发：Persona 列表展示 (MVP)**

  * **数据模型定义:** **在** **data/model** **包下创建了核心数据类** **Persona.kt**，并使用 **@Serializable** **注解为其添加了序列化能力。**
  * **模拟数据源:** **创建了** **MockData.kt**，用于提供开发阶段的 Persona 列表数据，实现了客户端的独立开发。
  * **UI 实现:** **在** **MainActivity.kt** **中，使用 Jetpack Compose 构建了** **PersonaListScreen**。通过 **LazyColumn** **和自定义的** **PersonaCard** **Composable，成功将模拟数据渲染为一个包含图片、标题和描述的滚动列表。**
* **工程化与版本控制**

  * **Git 仓库初始化:** **项目已成功初始化为本地 Git 仓库。**
  * **版本忽略配置:** **配置了针对 Android 项目的标准化** **.gitignore** **文件，以排除不必要的编译产物和本地配置文件。**
  * **首次提交与远程同步:** **完成了项目的首次提交 (Initial commit)，并将本地仓库成功推送至远程 GitHub 私有仓库，建立了代码的版本管理与安全备份机制。**

### 技术问题与解决方案复盘 (Issues & Resolutions):

* **问题 1:** **Gradle 插件版本与 Version Catalog 配置不匹配，导致构建失败。**

  * **解决方案:** **统一在项目根** **build.gradle.kts** **中采用** **id("...") version "..." apply false** **的方式明确声明所有插件及其版本，并在模块级** **build.gradle.kts** **中仅通过** **id("...")** **应用，确保了配置的稳定性和清晰性。**
* **问题 2:** **应用启动时因 Hilt 未正确初始化而崩溃。**

  * **解决方案:** **通过分析 Logcat 中** **IllegalStateException**，定位到 **AndroidManifest.xml** **未能通过** **android:name** **属性指定自定义的** **@HiltAndroidApp** **Application。修正后问题解决。**
* **问题 3:** **应用启动时因尝试将 Application 实例化为 Activity 而崩溃。**

  * **解决方案:** **通过分析 Logcat 中** **ClassCastException**，定位到 **AndroidManifest.xml** **中的启动** **intent-filter** **错误地关联了 Application 而非** **MainActivity**。将 **intent-filter** **移回正确的** **`<activity>`** **标签内后问题解决。**
* **问题 4:** **应用加载网络图片时因网络权限缺失而崩溃。**

  * **解决方案:** **通过分析 Logcat 中** **SecurityException**，定位到 **AndroidManifest.xml** **缺少** **INTERNET** **权限声明。添加** **`<uses-permission>`** **标签后问题解决。**

### 下一步计划 (Next Steps):

* **UI 层:** **在** **ui/screens** **包下创建** **PersonaDetailScreen.kt**，用于展示单个 Persona 的详细信息。
* **导航:** **引入 Jetpack Navigation Compose 库，实现从** **PersonaListScreen** **到** **PersonaDetailScreen** **的页面跳转逻辑。**
* **ViewModel 层:** **创建** **PersonaDetailViewModel.kt**，将业务逻辑从 UI 层分离，开始正式实践 MVVM 架构。
